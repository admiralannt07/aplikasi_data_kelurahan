{% extends 'warga/base.html' %} {% block title %}Daftar Pengaduan - Kelurahan{% endblock %} {% block content %}
<div class="container mx-auto px-4 py-8">
  <!-- Breadcrumb -->
  <nav class="flex mb-8" aria-label="Breadcrumb">
    <ol class="inline-flex items-center space-x-1 md:space-x-3">
      <li class="inline-flex items-center">
        <a
          href="{% url 'landing' %}"
          class="inline-flex items-center text-sm font-medium text-kelurahan-700 hover:text-kelurahan-600"
        >
          <i class="fas fa-home mr-2"></i>
          Beranda
        </a>
      </li>
      <li aria-current="page">
        <div class="flex items-center">
          <i class="fas fa-chevron-right text-kelurahan-400 mx-2"></i>
          <span class="ml-1 text-sm font-medium text-kelurahan-500 md:ml-2">Daftar Pengaduan</span>
        </div>
      </li>
    </ol>
  </nav>

  <!-- Header Section -->
  <div class="bg-white rounded-lg shadow-md p-6 mb-8">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between">
      <div class="flex items-center mb-4 md:mb-0">
        <div class="h-12 w-12 bg-orange-100 rounded-full flex items-center justify-center mr-4">
          <i class="fas fa-clipboard-list text-xl text-orange-600"></i>
        </div>
        <div>
          <h1 class="text-3xl font-bold text-kelurahan-800">Daftar Pengaduan</h1>
          <p class="text-kelurahan-600">Kelola dan pantau semua pengaduan warga</p>
        </div>
      </div>
      <div class="flex flex-col sm:flex-row gap-3">
        <a
          href="{% url 'pengaduan-tambah' %}"
          class="bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg"
        >
          <i class="fas fa-plus"></i>
          Tambah Pengaduan Baru
        </a>
      </div>
    </div>
  </div>

  <!-- Statistics Cards -->
  <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center">
        <div class="h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center">
          <i class="fas fa-clipboard-list text-blue-600"></i>
        </div>
        <div class="ml-4">
          <p class="text-sm font-medium text-kelurahan-600">Total Pengaduan</p>
          <p class="text-2xl font-bold text-kelurahan-900">{{ total_pengaduan }}</p>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center">
        <div class="h-12 w-12 bg-yellow-100 rounded-full flex items-center justify-center">
          <i class="fas fa-clock text-yellow-600"></i>
        </div>
        <div class="ml-4">
          <p class="text-sm font-medium text-kelurahan-600">Baru</p>
          <p class="text-2xl font-bold text-kelurahan-900">{{ pengaduan_baru }}</p>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center">
        <div class="h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center">
          <i class="fas fa-cog text-blue-600"></i>
        </div>
        <div class="ml-4">
          <p class="text-sm font-medium text-kelurahan-600">Diproses</p>
          <p class="text-2xl font-bold text-kelurahan-900">{{ pengaduan_diproses }}</p>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center">
        <div class="h-12 w-12 bg-green-100 rounded-full flex items-center justify-center">
          <i class="fas fa-check-circle text-green-600"></i>
        </div>
        <div class="ml-4">
          <p class="text-sm font-medium text-kelurahan-600">Selesai</p>
          <p class="text-2xl font-bold text-kelurahan-900">{{ pengaduan_selesai }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Pengaduan List -->
  <div class="bg-white rounded-lg shadow-md overflow-hidden">
    <div class="px-6 py-4 bg-kelurahan-50 border-b border-kelurahan-200">
      <h2 class="text-xl font-semibold text-kelurahan-800">
        <i class="fas fa-list mr-2"></i>
        Semua Pengaduan
      </h2>
    </div>

    {% if object_list %}
    <div class="divide-y divide-kelurahan-200">
      {% for aduan in object_list %}
      <div class="p-6 hover:bg-kelurahan-50 transition-colors duration-200">
        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
          <div class="flex-1">
            <div class="flex items-start justify-between mb-2">
              <h3 class="text-lg font-semibold text-kelurahan-900 mb-1">{{ aduan.judul }}</h3>
              <div class="ml-4">
                {% if aduan.status == 'BARU' %}
                <span
                  class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"
                >
                  <i class="fas fa-clock mr-1"></i>
                  {{ aduan.get_status_display }}
                </span>
                {% elif aduan.status == 'DIPROSES' %}
                <span
                  class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"
                >
                  <i class="fas fa-cog mr-1"></i>
                  {{ aduan.get_status_display }}
                </span>
                {% elif aduan.status == 'SELESAI' %}
                <span
                  class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"
                >
                  <i class="fas fa-check-circle mr-1"></i>
                  {{ aduan.get_status_display }}
                </span>
                {% else %}
                <span
                  class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800"
                >
                  {{ aduan.get_status_display }}
                </span>
                {% endif %}
              </div>
            </div>

            <p class="text-kelurahan-600 mb-3 line-clamp-2">{{ aduan.deskripsi|truncatewords:20 }}</p>

            <div class="flex items-center text-sm text-kelurahan-500">
              <i class="fas fa-user mr-2"></i>
              <span class="font-medium">Pelapor:</span>
              <span class="ml-1">{{ aduan.pelapor.nama_lengkap }}</span>
              <span class="mx-3">â€¢</span>
              <i class="fas fa-calendar mr-2"></i>
              <span>{{ aduan.tanggal_lapor|date:"d M Y" }}</span>
            </div>
          </div>

          <div class="mt-4 lg:mt-0 lg:ml-6 flex flex-col sm:flex-row gap-2">
            <a
              href="{% url 'pengaduan-update' aduan.pk %}"
              class="inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-kelurahan-600 hover:bg-kelurahan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-kelurahan-500 transition-colors duration-200"
            >
              <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                ></path>
              </svg>
              Edit
            </a>
            <a
              href="{% url 'pengaduan-delete' aduan.pk %}"
              class="inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200"
              onclick="return confirm('Apakah Anda yakin ingin menghapus pengaduan ini?')"
            >
              <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                ></path>
              </svg>
              Hapus
            </a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="p-12 text-center">
      <div class="mx-auto h-24 w-24 bg-kelurahan-100 rounded-full flex items-center justify-center mb-4">
        <i class="fas fa-clipboard-list text-3xl text-kelurahan-400"></i>
      </div>
      <h3 class="text-lg font-medium text-kelurahan-900 mb-2">Belum Ada Pengaduan</h3>
      <p class="text-kelurahan-500 mb-6">Belum ada pengaduan yang terdaftar dalam sistem.</p>
      <a
        href="{% url 'pengaduan-tambah' %}"
        class="inline-flex items-center px-6 py-3 border border-transparent rounded-lg text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 transition-colors duration-200"
      >
        <i class="fas fa-plus mr-2"></i>
        Buat Pengaduan Pertama
      </a>
    </div>
    {% endif %}
  </div>

  <!-- Quick Actions -->
  <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="bg-kelurahan-50 border border-kelurahan-200 rounded-lg p-6">
      <div class="flex items-start">
        <div class="flex-shrink-0">
          <i class="fas fa-users text-kelurahan-500 text-xl"></i>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-medium text-kelurahan-800 mb-2">Kelola Data Warga</h3>
          <p class="text-sm text-kelurahan-600 mb-3">Lihat dan kelola data warga yang terdaftar</p>
          <a
            href="{% url 'warga-list' %}"
            class="inline-flex items-center text-sm font-medium text-kelurahan-700 hover:text-kelurahan-600"
          >
            Lihat Daftar Warga
            <i class="fas fa-arrow-right ml-2"></i>
          </a>
        </div>
      </div>
    </div>

    <div class="bg-orange-50 border border-orange-200 rounded-lg p-6">
      <div class="flex items-start">
        <div class="flex-shrink-0">
          <i class="fas fa-chart-bar text-orange-500 text-xl"></i>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-medium text-orange-800 mb-2">Laporan Pengaduan</h3>
          <p class="text-sm text-orange-600 mb-3">Lihat statistik dan laporan pengaduan</p>
          <a href="#" class="inline-flex items-center text-sm font-medium text-orange-700 hover:text-orange-600">
            Lihat Laporan
            <i class="fas fa-arrow-right ml-2"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
